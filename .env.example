# =========================================================
# CORE SETTINGS
# =========================================================
DEBUG=True
SECRET_KEY=change_me_please
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# =========================================================
# DATABASE (Postgres)
# =========================================================
# Lưu ý: Mật khẩu có ký tự đặc biệt (@) phải mã hóa thành %40
# Cấu trúc: postgres://USER:PASSWORD@HOST:PORT/DB_NAME
DATABASE_URL=postgres://USER:PASSWORD@HOST:PORT/DB_NAME

# =========================================================
# REDIS (Realtime & Background Tasks)
# =========================================================
# Dùng chung cho cả Channels (WebSocket) và Celery
REDIS_URL=redis://127.0.0.1:6379/0

# =========================================================
# CORS (Frontend Connections)
# =========================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:5173

# =========================================================
# EMAIL CONFIGURATION
# =========================================================
# Dev: In ra màn hình console (không gửi thật)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# Prod: Bỏ comment các dòng dưới để gửi mail thật qua Gmail/SMTP
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=your-email@gmail.com
# EMAIL_HOST_PASSWORD=your-app-password

DEFAULT_FROM_EMAIL=OneTop Recruitment <noreply@onetop.com>

# =========================================================
# FRONTEND CONFIGURATION
# =========================================================
FRONTEND_URL=http://localhost:3000

# =========================================================
# REDIS CACHE CONFIGURATION
# =========================================================
# Redis for caching (separate from Celery/Channels)
# REDIS_CACHE_URL=redis://127.0.0.1:6379/1

# =========================================================
# RATE LIMITING / THROTTLING
# =========================================================
# PDF Generation Rate Limit (per user)
PDF_GENERATION_RATE=5/hour

# Application Submission Rate Limit (per user)
APPLICATION_SUBMISSION_RATE=20/day

# Message Send Rate Limit (per user)
MESSAGE_SEND_RATE=100/hour

# =========================================================
# ELASTICSEARCH CONFIGURATION
# =========================================================
# Elasticsearch host URL
# ELASTICSEARCH_URL=http://elasticsearch:9200

# Signal processor for ES indexing
# Development: django_elasticsearch_dsl.signals.RealTimeSignalProcessor (sync)
# Production: django_elasticsearch_dsl.signals.CelerySignalProcessor (async)
ELASTICSEARCH_DSL_SIGNAL_PROCESSOR=django_elasticsearch_dsl.signals.RealTimeSignalProcessor

# Search relevance tuning
ES_SEARCH_TITLE_BOOST=3
ES_SEARCH_FUZZINESS=AUTO
ES_SEARCH_FIELDS=title,requirements,description,company.name

# =========================================================
# BUSINESS LOGIC CONSTANTS
# =========================================================
# Job posting cost in credits
JOB_POSTING_CREDIT_COST=1

# File upload limits (bytes)
MAX_CV_FILE_SIZE=5242880  # 5MB
MAX_COMPANY_LOGO_SIZE=2097152  # 2MB

# Email batch size for daily job alerts
JOB_ALERT_BATCH_SIZE=500

# PDF generation timeout (seconds)
PDF_GENERATION_TIMEOUT=30

# =========================================================
# DATABASE CONCURRENCY CONTROL
# =========================================================
# Enable Optimistic Locking (for traffic > 10k concurrent users)
USE_OPTIMISTIC_LOCKING=False

# Max retry attempts for optimistic lock conflicts
OPTIMISTIC_LOCK_MAX_RETRIES=3

# =========================================================
# MONITORING & ERROR TRACKING (Production)
# =========================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Sentry environment (development/staging/production)
SENTRY_ENVIRONMENT=development

# Sentry performance monitoring sample rate (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% of transactions

# =========================================================
# WEBSOCKET CONFIGURATION
# =========================================================
# WebSocket ticket expiry time (seconds)
WEBSOCKET_TICKET_EXPIRY=10